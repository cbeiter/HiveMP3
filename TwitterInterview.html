<html>
<script language="javascript" type="text/javascript">

    function getSuggestions() {
        // go back and double check this.value is getting the value of the control properly
        var input = this.value;

        // do some validating
        if (input && input.length > 1) {
            $.ajax(endPoint, input, parseResponses)
            {
                // handle error responses & timeouts
            }
        }
    }

    function parseResponses() {
        var dropdownMarkup;

        // put beginning markup in
        dropdownMarkup = "<ul id='suggestionsDropdown'>";

        for (var i = 0; i < response.length; i++) {
            dropdownMarkup += "<li><a onclick='insertSuggestion(" + data + ");' " +
             response[i].data + "</a></li>";
        }

        dropdownMarkup += "</ul>";

        var dropdownElems = $(dropdownMarkup);

        $("#typeAhead").appendAfter(dropdownElems);
    }

    function insertSuggestion(data) {
        if (data && data.length > 0) {
            $("#typeAhead").value = data;
        }

        // now we should hide the dropdown
        $("#suggestionsDropdown").remove();
    }

    $("#typeAhead").on("keyup", getSuggestions);


</script>
<body>

<input type="text" id="typeAhead" name="typeAhead"/>
</body>
</html>

